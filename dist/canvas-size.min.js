/*!
 * canvas-size
 * v1.0.4
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2020 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).canvasSize=e()}(this,(function(){"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var i,r={max:null,min:1,sizes:[],step:1024,onError:Function.prototype,onSuccess:Function.prototype},o={area:[16384,14188,11402,10836,11180,8192,4096,r.min],height:[8388607,32767,16384,8192,4096,r.min],width:[4194303,32767,16384,8192,4096,r.min]};if(window&&"OffscreenCanvas"in window&&"Worker"in window){(i=function(t){var e="(".concat(t.toString(),")()"),n=new Blob([e],{type:"application/javascript"}),i=URL.createObjectURL(n),r=new Worker(i);return URL.revokeObjectURL(i),r}((function(){self.onmessage=function(t){var e,n,i,r,o,a,s;e=t.data,n=e.job,i=e.cvs,r=e.width,o=e.height,a=e.fill,(s=i.getContext("2d")).fillRect.apply(s,a),self.postMessage({job:n,width:r,height:o,result:Boolean(s.getImageData.apply(s,a).data[3])})}}))).onmessage=function(t){console.log("Done (Worker)",t.data);var e=t.data,n=e.width,i=e.height,r=e.job,o=e.result;document.dispatchEvent(new CustomEvent(r,{detail:{height:i,width:n,result:o}}))}}function a(t){var e=t.width,n=t.height,r=e-1,o=n-1;if(i){console.log("Worker");var a=new OffscreenCanvas(e,n),s=Date.now();document.addEventListener(s,(function(e){console.log("Done (Listener)",e.detail);var n=e.detail,i=n.width,r=n.height;n.result?t.onSuccess(i,r):t.onError(i,r)}),!1),i.postMessage({cvs:a,fill:[r,o,1,1],height:n,job:s,width:e},[a])}else try{console.log("Non-Worker");var c=document.createElement("canvas"),h=c.getContext("2d");c.width=e,c.height=n,h.fillRect(r,o,1,1),h.getImageData(r,o,1,1).data[3]?t.onSuccess(e,n):t.onError(e,n)}catch(i){t.onError(e,n)}}function s(t){var e=t.sizes.shift(),n=e[0],i=e[1];a(n)?t.onSuccess(n,i):(t.onError(n,i),t.sizes.length&&setTimeout((function(){s(t)}),0))}function c(t){var e=t.width===t.height,n=1===t.height,i=1===t.width,o=[];if(t.width&&t.height){for(var a=t.min||r.min,s=t.step||r.step,c=Math.max(t.width,t.height);c>a;){var h=e||n?c:1,u=e||i?c:1;o.push([h,u]),c-=s}o.push([a,a])}else t.sizes.forEach((function(t){var r=e||n?t:1,a=e||i?t:1;o.push([r,a])}));return o}return{maxArea:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c({width:n.max,height:n.max,min:n.min,step:n.step,sizes:e(o.area)}),a=t({},r,n,{sizes:i});s(a)},maxHeight:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c({width:1,height:n.max,min:n.min,step:n.step,sizes:e(o.height)}),a=t({},r,n,{sizes:i});s(a)},maxWidth:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c({width:n.max,height:1,min:n.min,step:n.step,sizes:e(o.width)}),a=t({},r,n,{sizes:i});s(a)},test:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t({},r,n);if(!i.sizes.length){var o=a(i);return o}i.sizes=e(n.sizes),s(i)}}}));
//# sourceMappingURL=canvas-size.min.js.map
