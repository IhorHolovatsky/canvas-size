/*!
 * canvas-size
 * v1.0.4
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2020 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).canvasSize=e()}(this,(function(){"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var i,r={max:null,min:1,sizes:[],step:1024,onError:Function.prototype,onSuccess:Function.prototype},o={area:[16384,14188,11402,10836,11180,8192,4096,r.min],height:[8388607,65535,32767,16384,8192,4096,r.min],width:[4194303,65535,32767,16384,8192,4096,r.min]};function a(t){var e=t.width,n=t.height,r=[e-1,n-1,1,1],o=Date.now();if(i)document.addEventListener(o,(function(e){var n=e.detail,i=n.width,r=n.height,o=n.isTestPass,a=n.benchmark;o?t.onSuccess(i,r,a):t.onError(i,r)}),!1),i.postMessage({job:o,width:e,height:n,fill:r});else try{var a=document.createElement("canvas"),s=a.getContext("2d");if(a.width=e,a.height=n,s.fillRect.apply(s,r),Boolean(s.getImageData.apply(s,r).data[3])){var h=Date.now()-o;t.onSuccess(e,n,h)}else t.onError(e,n)}catch(i){t.onError(e,n)}}function s(t){var e=t.sizes.shift();a({width:e[0],height:e[1],onError:function(e,n){t.onError(e,n),t.sizes.length&&s(t)},onSuccess:t.onSuccess})}function h(t){var e=t.width===t.height,n=1===t.height,i=1===t.width,o=[];if(t.width&&t.height){for(var a=t.min||r.min,s=t.step||r.step,h=Math.max(t.width,t.height);h>a;){var c=e||n?h:1,f=e||i?h:1;o.push([c,f]),h-=s}o.push([a,a])}else t.sizes.forEach((function(t){var r=e||n?t:1,a=e||i?t:1;o.push([r,a])}));return o}return window&&"OffscreenCanvas"in window&&"Worker"in window&&((i=function(t){var e="(".concat(t.toString(),")()"),n=new Blob([e],{type:"application/javascript"}),i=URL.createObjectURL(n),r=new Worker(i);return URL.revokeObjectURL(i),r}((function(){self.onmessage=function(t){!function(t){var e=t.job,n=t.width,i=t.height,r=t.fill,o=new OffscreenCanvas(n,i).getContext("2d");o.fillRect.apply(o,r);var a=Boolean(o.getImageData.apply(o,r).data[3]);self.postMessage({job:e,width:n,height:i,isTestPass:a})}(t.data)}}))).onmessage=function(t){var e=t.data,n=e.job,i=e.width,r=e.height,o=e.isTestPass;document.dispatchEvent(new CustomEvent(n,{detail:{width:i,height:r,isTestPass:o,benchmark:Date.now()-n}}))}),{maxArea:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=h({width:n.max,height:n.max,min:n.min,step:n.step,sizes:e(o.area)}),a=t({},r,n,{sizes:i});s(a)},maxHeight:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=h({width:1,height:n.max,min:n.min,step:n.step,sizes:e(o.height)}),a=t({},r,n,{sizes:i});s(a)},maxWidth:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=h({width:n.max,height:1,min:n.min,step:n.step,sizes:e(o.width)}),a=t({},r,n,{sizes:i});s(a)},test:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t({},r,n);i.sizes.length?(i.sizes=e(n.sizes),s(i)):a(i)}}}));
//# sourceMappingURL=canvas-size.min.js.map
