/*!
 * canvas-size
 * v1.1.0
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2020 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?t(Object(s),!0).forEach((function(t){e(r,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(s,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function s(e){var t,r,n=e.sizes.shift(),i=n[0],o=n[1],a=[i-1,o-1,1,1],c=Date.now(),h="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;h?(t=new OffscreenCanvas(1,1),r=new OffscreenCanvas(i,o)):((t=document.createElement("canvas")).width=1,t.height=1,(r=document.createElement("canvas")).width=i,r.height=o);var u=t.getContext("2d"),l=r.getContext("2d");l&&(l.fillRect.apply(l,a),u.drawImage(r,i-1,o-1,1,1,0,0,1,1));var g=u&&0!==u.getImageData(0,0,1,1).data[3],p=Date.now()-c;return h?(postMessage({width:i,height:o,benchmark:p,isTestPass:g}),!g&&e.sizes.length&&s(e)):g?e.onSuccess(i,o,p):(e.onError(i,o,p),e.sizes.length&&s(e)),g}var i={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},o={area:[32767,16384,14188,11402,10836,11180,8192,4096,i.min],height:[8388607,65535,32767,16384,8192,4096,i.min],width:[4194303,65535,32767,16384,8192,4096,i.min]},a={};function c(e){var t=e.width===e.height,r=1===e.height,n=1===e.width,s=[];if(e.width&&e.height)for(var o=e.min||i.min,a=e.step||i.step,c=Math.max(e.width,e.height);c>=o;){var h=t||r?c:1,u=t||n?c:1;s.push([h,u]),c-=a}else e.sizes.forEach(e=>{var i=t||r?e:1,o=t||n?e:1;s.push([i,o])});return s}function h(e){var t=window&&"HTMLCanvasElement"in window,i=window&&"OffscreenCanvas"in window,o=Date.now(),{onError:c,onSuccess:h}=e,u=n(e,["onError","onSuccess"]),l=null;if(!t)return!1;if(e.useWorker&&i){var g="\n            ".concat(s.toString(),"\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),p=new Blob([g],{type:"application/javascript"}),f=URL.createObjectURL(p);l=new Worker(f),URL.revokeObjectURL(f),l.onmessage=function(e){var{width:t,height:r,benchmark:n,isTestPass:s}=e.data;s?(a[o].onSuccess(t,r,n),delete a[o]):a[o].onError(t,r,n)}}return e.usePromise?new Promise((t,n)=>{var i=r(r({},e),{},{onError(t,r,s){var i;if(0===e.sizes.length)i=!0;else{var[[o,a]]=e.sizes.slice(-1);i=t===o&&r===a}c(t,r,s),i&&n({width:t,height:r,benchmark:s})},onSuccess(e,r,n){h(e,r,n),t({width:e,height:r,benchmark:n})}});if(l){var{onError:g,onSuccess:p}=i;a[o]={onError:g,onSuccess:p},l.postMessage(u)}else s(i)}):l?(a[o]={onError:c,onSuccess:h},void l.postMessage(u)):s(e)}var u={maxArea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c({width:e.max,height:e.max,min:e.min,step:e.step,sizes:[...o.area]});return h(Object.assign({},i,e,{sizes:t}))},maxHeight(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c({width:1,height:e.max,min:e.min,step:e.step,sizes:[...o.height]});return h(Object.assign({},i,e,{sizes:t}))},maxWidth(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c({width:e.max,height:1,min:e.min,step:e.step,sizes:[...o.width]});return h(Object.assign({},i,e,{sizes:t}))},test(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},i,e);return t.sizes=[...t.sizes],t.width&&t.height&&(t.sizes=[[t.width,t.height]]),h(t)}};export default u;
//# sourceMappingURL=canvas-size.esm.min.js.map
