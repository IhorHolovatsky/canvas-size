/*!
 * canvas-size
 * v1.0.4
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2020 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
var e,t={max:null,min:1,sizes:[],step:1024,onError:Function.prototype,onSuccess:Function.prototype},i={area:[16384,14188,11402,10836,11180,8192,4096,t.min],height:[8388607,65535,32767,16384,8192,4096,t.min],width:[4194303,65535,32767,16384,8192,4096,t.min]};function s(t){var{width:i,height:s}=t,n=[i-1,s-1,1,1],a=Date.now();if(e)document.addEventListener(a,(function(e){var{width:i,height:s,isTestPass:n,benchmark:a}=e.detail;n?t.onSuccess(i,s,a):t.onError(i,s)}),!1),e.postMessage({job:a,width:i,height:s,fill:n});else try{var h=document.createElement("canvas"),o=h.getContext("2d");if(h.width=i,h.height=s,o.fillRect.apply(o,n),Boolean(o.getImageData.apply(o,n).data[3])){var r=Date.now()-a;t.onSuccess(i,s,r)}else t.onError(i,s)}catch(e){t.onError(i,s)}}function n(e){var t=e.sizes.shift();s({width:t[0],height:t[1],onError(t,i){e.onError(t,i),e.sizes.length&&n(e)},onSuccess:e.onSuccess})}function a(e){var i=e.width===e.height,s=1===e.height,n=1===e.width,a=[];if(e.width&&e.height){for(var h=e.min||t.min,o=e.step||t.step,r=Math.max(e.width,e.height);r>h;){var c=i||s?r:1,d=i||n?r:1;a.push([c,d]),r-=o}a.push([h,h])}else e.sizes.forEach(e=>{var t=i||s?e:1,h=i||n?e:1;a.push([t,h])});return a}window&&"OffscreenCanvas"in window&&"Worker"in window&&((e=function(e){var t="(".concat(e.toString(),")()"),i=new Blob([t],{type:"application/javascript"}),s=URL.createObjectURL(i),n=new Worker(s);return URL.revokeObjectURL(s),n}((function(){self.onmessage=function(e){!function(e){var{job:t,width:i,height:s,fill:n}=e,a=new OffscreenCanvas(i,s).getContext("2d");a.fillRect.apply(a,n);var h=Boolean(a.getImageData.apply(a,n).data[3]);self.postMessage({job:t,width:i,height:s,isTestPass:h})}(e.data)}}))).onmessage=function(e){var{job:t,width:i,height:s,isTestPass:n}=e.data;document.dispatchEvent(new CustomEvent(t,{detail:{width:i,height:s,isTestPass:n,benchmark:Date.now()-t}}))});var h={maxArea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a({width:e.max,height:e.max,min:e.min,step:e.step,sizes:[...i.area]});n(Object.assign({},t,e,{sizes:s}))},maxHeight(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a({width:1,height:e.max,min:e.min,step:e.step,sizes:[...i.height]});n(Object.assign({},t,e,{sizes:s}))},maxWidth(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a({width:e.max,height:1,min:e.min,step:e.step,sizes:[...i.width]});n(Object.assign({},t,e,{sizes:s}))},test(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Object.assign({},t,e);i.sizes.length?(i.sizes=[...e.sizes],n(i)):s(i)}};export default h;
//# sourceMappingURL=canvas-size.esm.min.js.map
