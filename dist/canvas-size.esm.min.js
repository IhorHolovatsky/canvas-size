/*!
 * canvas-size
 * v1.0.0
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2018 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
const cvs=document?document.createElement("canvas"):null,ctx=cvs&&cvs.getContext?cvs.getContext("2d"):null,defaults={max:null,min:1,sizes:[],step:1024,onError:Function.prototype,onSuccess:Function.prototype},testSizes={area:[16384,14188,11402,10836,11180,8192,4096,defaults.min],height:[8388607,32767,16384,8192,4096,defaults.min],width:[4194303,32767,16384,8192,4096,defaults.min]};function canvasTest(t,e){const s=t-1,i=e-1;try{return cvs.width=t,cvs.height=e,ctx.fillRect(s,i,1,1),Boolean(ctx.getImageData(s,i,1,1).data[3])}catch(t){return!1}}function canvasTestLoop(t){const e=t.sizes.shift(),s=e[0],i=e[1];canvasTest(s,i)?t.onSuccess(s,i):(t.onError(s,i),t.sizes.length&&setTimeout(function(){canvasTestLoop(t)},0))}function createSizesArray(t){const e=t.width===t.height,s=1===t.height,i=1===t.width,n=[];if(t.width&&t.height){const a=t.min||defaults.min,c=t.step||defaults.step;let o=Math.max(t.width,t.height);for(;o>a;){const t=e||s?o:1,a=e||i?o:1;n.push([t,a]),o-=c}n.push([a,a])}else t.sizes.forEach(t=>{const a=e||s?t:1,c=e||i?t:1;n.push([a,c])});return n}const canvasSize={maxArea(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=createSizesArray({width:t.max,height:t.max,min:t.min,step:t.step,sizes:[...testSizes.area]});canvasTestLoop(Object.assign({},defaults,t,{sizes:e}))},maxHeight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=createSizesArray({width:1,height:t.max,min:t.min,step:t.step,sizes:[...testSizes.height]});canvasTestLoop(Object.assign({},defaults,t,{sizes:e}))},maxWidth(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=createSizesArray({width:t.max,height:1,min:t.min,step:t.step,sizes:[...testSizes.width]});canvasTestLoop(Object.assign({},defaults,t,{sizes:e}))},test(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=Object.assign({},defaults,t);if(!e.sizes.length){return canvasTest(e.width,e.height)}e.sizes=[...t.sizes],canvasTestLoop(e)}};export default canvasSize;
//# sourceMappingURL=canvas-size.esm.min.js.map
